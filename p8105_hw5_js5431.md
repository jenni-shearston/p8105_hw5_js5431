p8105\_hw5\_js5431
================
J Shearston
November 5, 2018

Problem 1
---------

### Read in and tidy data

``` r
file_names = list.files("./data")

paths = tibble(file_names) %>% 
  mutate(file_names = str_c("./data/", file_names))
```

``` r
## read in files
readin = function(x) {
  read_csv(file = x)
}

## tidy observation data
obs_cleanup = function(x){
  gather(x, key = week, value = obs_data, week_1:week_8) %>% 
    mutate(week = str_replace(week, "week_", ""))
}
```

``` r
study_data = 
  paths %>% 
  mutate(data = map(file_names, readin),
         id = str_replace(file_names, "./data/", ""),
         id = str_replace(id, ".csv", ""),
         exp_group = str_detect(id, "exp"),
         data = map(data, obs_cleanup)) %>% 
  select(-file_names)
```

### Spaghetti plot

Figure 1 depicts spaghetti plots for each research subject over time, faceted by study arm. The control group (FALSE facet) has markedly lower observation values over time when compared to the experimental group (TRUE facet). While the control group's numbers remain fairly stable and even slightly decline after eight weeks, with some variation, the experimental group's numbers clearly increase over the eight week period.

``` r
study_data %>% 
  unnest() %>%
  mutate(week = as.numeric(week)) %>% 
  ggplot(aes(x = week, y = obs_data, color = id)) +
  geom_line() +
  facet_grid(~exp_group) +
  labs(
    title = "Figure 1. Observation Value over Time, by Subject",
    x = "Week",
    y = "Observation Value",
    caption = "Control Group = FALSE, Experimental Group = TRUE") +
  theme(legend.position="none")
```

<img src="p8105_hw5_js5431_files/figure-markdown_github/p1 spaghetti plot-1.png" width="90%" />

Problem 2
---------
